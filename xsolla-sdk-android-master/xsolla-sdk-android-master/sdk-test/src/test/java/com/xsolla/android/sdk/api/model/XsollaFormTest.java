package com.xsolla.android.sdk.api.model;

import com.fasterxml.jackson.databind.JsonNode;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.xsolla.android.sdk.ApplicationTestCase;

import org.junit.Assert;
import org.junit.Before;
import org.junit.Test;

import java.io.IOException;

public class XsollaFormTest extends ApplicationTestCase {

    XsollaForm xsollaForm;

    @Before
    public void setUp(){
        xsollaForm = new XsollaForm();
    }

    @Test
    public void testFormParsing(){
        String response = "{\"title\":\"Visa \\/ Mastercard\",\"textAll\":{\"error\":[],\"info\":[],\"fatal\":false},\"errors\":null,\"account\":\"\",\"accountXsolla\":\"\",\"onlineBanking\":\"\",\"form\":{\"description\":{\"name\":\"description\",\"title\":\"Test Purchase\",\"type\":\"label\",\"example\":null,\"value\":null,\"options\":null,\"isMandatory\":null,\"isReadonly\":null,\"isVisible\":\"1\",\"isPakets\":null,\"tooltip\":null},\"savePsAccountOnly\":{\"name\":\"savePsAccountOnly\",\"title\":\"savePsAccountOnly\",\"type\":\"text\",\"example\":null,\"value\":\"\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"firstForm\":{\"name\":\"firstForm\",\"title\":\"firstForm\",\"type\":\"text\",\"example\":null,\"value\":\"1\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"debug\":{\"name\":\"debug\",\"title\":\"debug\",\"type\":\"text\",\"example\":null,\"value\":\"\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"locale\":{\"name\":\"locale\",\"title\":\"locale\",\"type\":\"text\",\"example\":null,\"value\":\"ru\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"currency_stored\":{\"name\":\"currency_stored\",\"title\":\"currency_stored\",\"type\":\"text\",\"example\":null,\"value\":\"USD\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"ip\":{\"name\":\"ip\",\"title\":\"ip\",\"type\":\"text\",\"example\":null,\"value\":\"\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"paymentWithSavedMethod\":{\"name\":\"paymentWithSavedMethod\",\"title\":\"paymentWithSavedMethod\",\"type\":\"text\",\"example\":null,\"value\":\"0\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"dfp\":{\"name\":\"dfp\",\"title\":\"dfp\",\"type\":\"text\",\"example\":null,\"value\":\"\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"purchaseDescription\":{\"name\":\"purchaseDescription\",\"title\":\"purchaseDescription\",\"type\":\"text\",\"example\":null,\"value\":\"Test Purchase\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"outCheckType\":{\"name\":\"outCheckType\",\"title\":\"outCheckType\",\"type\":\"text\",\"example\":null,\"value\":\"any\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"projectAmountCheckType\":{\"name\":\"projectAmountCheckType\",\"title\":\"projectAmountCheckType\",\"type\":\"text\",\"example\":null,\"value\":\"equals\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"paymentType\":{\"name\":\"paymentType\",\"title\":\"paymentType\",\"type\":\"text\",\"example\":null,\"value\":\"virtual_currency\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"sms\":{\"name\":\"sms\",\"title\":\"sms\",\"type\":\"table\",\"example\":null,\"value\":\"\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\n\\t\\t\\t\",\"options\":{\"head\":[[\"Ваша покупка\",\"Короткий номер\",\"Текст сообщения\",\"Стоимость\"]],\"body\":[[]]},\"isMandatory\":null,\"isReadonly\":null,\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"isFixedPay\":{\"name\":\"isFixedPay\",\"title\":\"isFixedPay\",\"type\":\"text\",\"example\":null,\"value\":\"1\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"originalOut\":{\"name\":\"originalOut\",\"title\":\"originalOut\",\"type\":\"text\",\"example\":null,\"value\":\"1\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"originalProjectAmount\":{\"name\":\"originalProjectAmount\",\"title\":\"originalProjectAmount\",\"type\":\"text\",\"example\":null,\"value\":\"0\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"projectAmount\":{\"name\":\"projectAmount\",\"title\":\"projectAmount\",\"type\":\"text\",\"example\":null,\"value\":\"0\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"purchaseAmount\":{\"name\":\"purchaseAmount\",\"title\":\"purchaseAmount\",\"type\":\"text\",\"example\":null,\"value\":\"\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"projectCurrency\":{\"name\":\"projectCurrency\",\"title\":\"projectCurrency\",\"type\":\"text\",\"example\":null,\"value\":\"\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"out_stored\":{\"name\":\"out_stored\",\"title\":\"out_stored\",\"type\":\"text\",\"example\":null,\"value\":\"1\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"projectAmount_stored\":{\"name\":\"projectAmount_stored\",\"title\":\"projectAmount_stored\",\"type\":\"text\",\"example\":null,\"value\":\"\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"card_number\":{\"name\":\"card_number\",\"title\":\"Номер карты \",\"type\":\"text\",\"example\":null,\"value\":\"\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"1\",\"isPakets\":null,\"tooltip\":null},\"card_year\":{\"name\":\"card_year\",\"title\":\"Год окончания срока действия карты\",\"type\":\"text\",\"example\":\"ГГ\",\"value\":\"\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"1\",\"isPakets\":null,\"tooltip\":null},\"card_month\":{\"name\":\"card_month\",\"title\":\"Месяц окончания срока действия карты\",\"type\":\"text\",\"example\":\"ММ\",\"value\":\"\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"1\",\"isPakets\":null,\"tooltip\":null},\"cvv\":{\"name\":\"cvv\",\"title\":\"CVV2\\/CVC2\",\"type\":\"text\",\"example\":null,\"value\":\"\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"1\",\"isPakets\":null,\"tooltip\":null},\"allowSubscription\":{\"name\":\"allowSubscription\",\"title\":\"Запомнить карту\",\"type\":\"check\",\"example\":null,\"value\":\"1\",\"options\":null,\"isMandatory\":\"0\",\"isReadonly\":null,\"isVisible\":\"1\",\"isPakets\":null,\"tooltip\":\"Сохраните свою карту, чтобы совершать следующие платежи в один клик без ввода дополнительной информации\"},\"isshortform\":{\"name\":\"isshortform\",\"title\":\"isshortform\",\"type\":\"text\",\"example\":null,\"value\":\"1\",\"options\":null,\"isMandatory\":\"0\",\"isReadonly\":\"0\",\"isVisible\":\"\",\"isPakets\":null,\"tooltip\":null},\"available_card_types\":{\"name\":\"available_card_types\",\"title\":\"available_card_types\",\"type\":\"text\",\"example\":null,\"value\":\"1,2,4,5,6\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"browserCountry\":{\"name\":\"browserCountry\",\"title\":\"browserCountry\",\"type\":\"text\",\"example\":null,\"value\":\"CS\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"bonusOut\":{\"name\":\"bonusOut\",\"title\":\"bonusOut\",\"type\":\"text\",\"example\":null,\"value\":\"0\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"idUserSession\":{\"name\":\"idUserSession\",\"title\":\"idUserSession\",\"type\":\"text\",\"example\":null,\"value\":\"\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"debugdata\":{\"name\":\"debugdata\",\"title\":\"debugdata\",\"type\":\"html\",\"example\":null,\"value\":\"\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"\",\"isPakets\":null,\"tooltip\":null},\"fix_command\":{\"name\":\"fix_command\",\"title\":\"fix_command\",\"type\":\"text\",\"example\":null,\"value\":\"check\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"fix_currency\":{\"name\":\"fix_currency\",\"title\":\"Валюта\",\"type\":\"select\",\"example\":null,\"value\":\"USD\",\"options\":[{\"value\":\"USD\",\"label\":\"USD\"}],\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":\"0\",\"tooltip\":null},\"fix_email\":{\"name\":\"fix_email\",\"title\":\"Email\",\"type\":\"text\",\"example\":null,\"value\":\"support@xsolla.com\",\"options\":null,\"isMandatory\":\"0\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"fix_out\":{\"name\":\"fix_out\",\"title\":\"Вы получаете\",\"type\":\"hidden\",\"example\":null,\"value\":\"1\",\"options\":null,\"isMandatory\":null,\"isReadonly\":null,\"isVisible\":null,\"isPakets\":null,\"tooltip\":null},\"fix_pid\":{\"name\":\"fix_pid\",\"title\":\"fix_pid\",\"type\":\"text\",\"example\":null,\"value\":\"26\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"fix_project\":{\"name\":\"fix_project\",\"title\":\"fix_project\",\"type\":\"text\",\"example\":null,\"value\":\"14244\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"fix_refer\":{\"name\":\"fix_refer\",\"title\":\"fix_refer\",\"type\":\"text\",\"example\":null,\"value\":\"3\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"fix_returnUrl\":{\"name\":\"fix_returnUrl\",\"title\":\"fix_returnUrl\",\"type\":\"text\",\"example\":null,\"value\":\"https:\\/\\/sandbox-secure.xsolla.com\\/paystation3\\/#\\/mobile\\/return\\/?access_token=0cSe0k7t2AD477BcOKvLKDXkdQcqcU0G&sessional=eyJoaXN0b3J5IjpbWyJwYXltZW50Iix0cnVlXV19\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"fix_signed_params\":{\"name\":\"fix_signed_params\",\"title\":\"fix_signed_params\",\"type\":\"text\",\"example\":null,\"value\":\"email,v1,project,local,currency,pid,apiMode,out,description\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"fix_testProject\":{\"name\":\"fix_testProject\",\"title\":\"fix_testProject\",\"type\":\"text\",\"example\":null,\"value\":\"1\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"fix_testPs\":{\"name\":\"fix_testPs\",\"title\":\"fix_testPs\",\"type\":\"text\",\"example\":null,\"value\":\"2\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"fix_testXsolla\":{\"name\":\"fix_testXsolla\",\"title\":\"fix_testXsolla\",\"type\":\"text\",\"example\":null,\"value\":\"3\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"fix_userip\":{\"name\":\"fix_userip\",\"title\":\"fix_userip\",\"type\":\"text\",\"example\":null,\"value\":\"185.30.23.18\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"fix_v1\":{\"name\":\"fix_v1\",\"title\":\"UserID\",\"type\":\"text\",\"example\":null,\"value\":\"1234567\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"1\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"fix_sid\":{\"name\":\"fix_sid\",\"title\":\"fix_sid\",\"type\":\"text\",\"example\":null,\"value\":\"142623211484449104\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"fix_id_package\":{\"name\":\"fix_id_package\",\"title\":\"fix_id_package\",\"type\":\"text\",\"example\":null,\"value\":\"\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"fix_sum\":{\"name\":\"fix_sum\",\"title\":\"Оплачиваете\",\"type\":\"hidden\",\"example\":null,\"value\":\"0.1\",\"options\":null,\"isMandatory\":null,\"isReadonly\":null,\"isVisible\":null,\"isPakets\":null,\"tooltip\":null},\"fix_pricepoints\":{\"name\":\"fix_pricepoints\",\"title\":\"Выберите пакет валюты\",\"type\":\"select\",\"example\":null,\"value\":\"0\",\"options\":[{\"description\":\"\",\"sum\":\"0.50\",\"out\":\"5\",\"bonusOut\":\"0\",\"type\":\"1571\",\"projectAmount\":\"0\",\"packetKey\":\"YTozOntzOjM6Im91dCI7ZDo1O3M6MTM6InByb2plY3RBbW91bnQiO2k6MDtzOjU6ImNoZWNrIjtzOjMyOiI5ODcwYmFhMDUzYWE3MDU1NmQ2NDNiNjZlMjc4YTQzNSI7fQ==\",\"key\":\"5.00\",\"value\":\"YTozOntzOjM6Im91dCI7ZDo1O3M6MTM6InByb2plY3RBbW91bnQiO2k6MDtzOjU6ImNoZWNrIjtzOjMyOiI5ODcwYmFhMDUzYWE3MDU1NmQ2NDNiNjZlMjc4YTQzNSI7fQ==\",\"label\":\"USD 0.50 = 5 ru_c_c\"},{\"description\":\"\",\"sum\":\"1.00\",\"out\":\"10\",\"bonusOut\":\"0\",\"type\":\"1571\",\"projectAmount\":\"0\",\"packetKey\":\"YTozOntzOjM6Im91dCI7ZDoxMDtzOjEzOiJwcm9qZWN0QW1vdW50IjtpOjA7czo1OiJjaGVjayI7czozMjoiNGQwZDZjNDZlM2U3ZWZhZDUxOTIwNjA1ZWNiNTg0M2IiO30=\",\"key\":\"10.00\",\"value\":\"YTozOntzOjM6Im91dCI7ZDoxMDtzOjEzOiJwcm9qZWN0QW1vdW50IjtpOjA7czo1OiJjaGVjayI7czozMjoiNGQwZDZjNDZlM2U3ZWZhZDUxOTIwNjA1ZWNiNTg0M2IiO30=\",\"label\":\"USD 1.00 = 10 ru_c_c\"},{\"description\":\"\",\"sum\":\"10.00\",\"out\":\"100\",\"bonusOut\":\"0\",\"type\":\"1571\",\"projectAmount\":\"0\",\"packetKey\":\"YTozOntzOjM6Im91dCI7ZDoxMDA7czoxMzoicHJvamVjdEFtb3VudCI7aTowO3M6NToiY2hlY2siO3M6MzI6IjE4MzVlMWRiMjZkYjUyZjFiODczYmU4NmZhNWNjYTQ4Ijt9\",\"key\":\"100.00\",\"value\":\"YTozOntzOjM6Im91dCI7ZDoxMDA7czoxMzoicHJvamVjdEFtb3VudCI7aTowO3M6NToiY2hlY2siO3M6MzI6IjE4MzVlMWRiMjZkYjUyZjFiODczYmU4NmZhNWNjYTQ4Ijt9\",\"label\":\"USD 10.00 = 100 ru_c_c\"},{\"description\":\"\",\"sum\":\"20.00\",\"out\":\"200\",\"bonusOut\":\"0\",\"type\":\"1571\",\"projectAmount\":\"0\",\"packetKey\":\"YTozOntzOjM6Im91dCI7ZDoyMDA7czoxMzoicHJvamVjdEFtb3VudCI7aTowO3M6NToiY2hlY2siO3M6MzI6ImRjNTRlMDViYzgyMWFjMTM5ZDc5MjVhMDg4MGI4Nzc3Ijt9\",\"key\":\"200.00\",\"value\":\"YTozOntzOjM6Im91dCI7ZDoyMDA7czoxMzoicHJvamVjdEFtb3VudCI7aTowO3M6NToiY2hlY2siO3M6MzI6ImRjNTRlMDViYzgyMWFjMTM5ZDc5MjVhMDg4MGI4Nzc3Ijt9\",\"label\":\"USD 20.00 = 200 ru_c_c\"},{\"description\":\"\",\"sum\":\"30.00\",\"out\":\"300\",\"bonusOut\":\"0\",\"type\":\"1571\",\"projectAmount\":\"0\",\"packetKey\":\"YTozOntzOjM6Im91dCI7ZDozMDA7czoxMzoicHJvamVjdEFtb3VudCI7aTowO3M6NToiY2hlY2siO3M6MzI6ImEzMDJkMjE5N2MyY2RkMDZlOGFkNjZkOTcwNDAyYTcyIjt9\",\"key\":\"300.00\",\"value\":\"YTozOntzOjM6Im91dCI7ZDozMDA7czoxMzoicHJvamVjdEFtb3VudCI7aTowO3M6NToiY2hlY2siO3M6MzI6ImEzMDJkMjE5N2MyY2RkMDZlOGFkNjZkOTcwNDAyYTcyIjt9\",\"label\":\"USD 30.00 = 300 ru_c_c\"}],\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":\"0\",\"tooltip\":null},\"signature\":{\"name\":\"signature\",\"title\":\"signature\",\"type\":\"text\",\"example\":null,\"value\":\"7762a1cd6bfa6a0e5dd06fbd1260d9f8\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null},\"fixed\":{\"name\":\"fixed\",\"title\":\"fixed\",\"type\":\"text\",\"example\":null,\"value\":\"command,currency,email,out,pid,project,refer,returnUrl,signed_params,testProject,testPs,testXsolla,userip,v1,command,pid,userip,sid,testPs,testProject,testXsolla,id_package,email,v1,project,currency,pid,out,sum,pricepoints,sum,pricepoints\",\"options\":null,\"isMandatory\":\"1\",\"isReadonly\":\"0\",\"isVisible\":\"0\",\"isPakets\":null,\"tooltip\":null}},\"checkoutForm\":\"\",\"javascript\":{},\"report\":null,\"backURL\":\"\",\"backVisible\":true,\"formURL\":\"?theme=100&project=14244&marketplace=paystation&action=directpayment&signparams=email%2Cv1%2Cproject%2Clocal%2Ccurrency%2Cpid%2CapiMode%2Cout%2Cdescription&v1=1234567&email=support%40xsolla.com&currency=USD&hidden=country&description=Test+Purchase&country=US&local=ru&pid=26\",\"skipForm\":false,\"formParams\":{\"theme\":100,\"project\":14244,\"marketplace\":\"paystation\",\"action\":\"directpayment\",\"signparams\":\"email,v1,project,local,currency,pid,apiMode,out,description\",\"v1\":\"1234567\",\"email\":\"support@xsolla.com\",\"currency\":\"USD\",\"hidden\":\"country\",\"description\":\"Test Purchase\",\"country\":\"US\",\"local\":\"ru\",\"pid\":26},\"formIsHidden\":false,\"instruction\":\"\",\"buyData\":{\"name\":\"sub\",\"title\":null,\"type\":\"submit\",\"example\":null,\"value\":\"Далее\",\"options\":null,\"isMandatory\":null,\"isReadonly\":null,\"isVisible\":\"1\",\"isPakets\":null,\"tooltip\":null,\"sum\":\"0.1\",\"currency\":\"USD\",\"enabled\":true},\"currency\":\"USD\",\"virtualCurrencyName\":\"ru_c_c\",\"instanceSize\":{\"width\":714,\"height\":600},\"status\":null,\"marketplace\":\"paystation\",\"hasFormBeenSubmitted\":false,\"currentCommand\":\"form\",\"minmax\":{\"project\":{\"min\":\"0\",\"max\":\"9223372036854775807\"},\"ps\":{\"min\":\"0.00\",\"max\":\"9223372036854775807\"}},\"requestID\":null,\"schemeRedirect\":0,\"pid\":26,\"iconUrl\":\"\\/\\/xsolla.cachefly.net\\/paymentoptions\\/paystation\\/theme_33\\/143x83\\/26.1416898622.png\",\"action\":null,\"infofields\":{\"2\":{\"attributes\":{\"key\":\"min\",\"pref\":\"\",\"parameter\":\"\"},\"value\":\"Минимум: 0 ru_c_c\",\"name\":\"text\"},\"3\":{\"attributes\":{\"key\":\"max\",\"pref\":\"\",\"parameter\":\"\"},\"value\":\"Максимум: 9223372036854775807 ru_c_c\",\"name\":\"text\"}},\"projectLogo\":null,\"formClass\":\"Form1380\",\"invoiceCreated\":false,\"project\":{\"id\":14244,\"project_logo\":null,\"name\":\"ru_c_c\",\"isUnknownPrice\":0,\"isMerchant\":false},\"theme\":{\"id\":100,\"template\":\"simple\",\"marketplace\":\"paystation\"},\"request\":{\"description\":\"Test Purchase\"},\"country\":{\"iso\":\"US\"},\"app\":{\"staticUrl\":\"\\/\\/xsolla.cachefly.net\\/paystation\\/\",\"cssRevision\":1,\"api\":{\"xps_url\":\"https:\\/\\/secure.xsolla.com\\/api\\/xps\\/index.php\",\"validate_url\":\"?theme=100&project=14244&marketplace=paystation&action=validate&signparams=email%2Cv1%2Cproject%2Clocal%2Ccurrency%2Cpid%2CapiMode%2Cout%2Cdescription&v1=1234567&email=support%40xsolla.com&currency=USD&hidden=country&description=Test+Purchase&country=US&local=ru&ajax=1\",\"terminals_url\":\"https:\\/\\/sandbox-secure.xsolla.com\\/api\\/terminals\\/\"},\"theme\":{\"cardIconUrl\":\"\\/\\/xsolla.cachefly.net\\/paymentoptions\\/paystation\\/theme_33\\/84x45\\/%id%.png\"}},\"context\":{\"id\":\"directpayment\"},\"isPackets\":false,\"isShortForm\":\"1\",\"isFastCheckout\":false,\"spikes\":{\"showCertificate\":false},\"api\":{\"ver\":\"1.0.0\"}}";
        ObjectMapper m = new ObjectMapper();
        JsonNode rootNode = null;
        try {
            rootNode = m.readTree(response);
            xsollaForm.parse(rootNode);

        } catch (IOException e) {
            e.printStackTrace();
        }


        String response1 = "21";
        ObjectMapper m1 = new ObjectMapper();
        JsonNode rootNode1 = null;
        try {
            rootNode1 = m.readTree(response1);
            xsollaForm.parse(rootNode1);
            //Assert.fail("Should have throw IOException");
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
